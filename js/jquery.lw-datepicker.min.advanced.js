var e=!0,g=null,i=!1,$,m,n,o,p;function q(b,a){return function(){return b.apply(a,arguments)}}$=jQuery;p={startDate:g,endDate:g,dowNames:"sun,mon,tue,wed,thu,fri,sat".split(","),monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),firstDayOfTheWeekIndex:0,autoFillToday:i,alwaysVisible:i,autoHideAfterClick:i,parseDate:g,formatDate:g,onChange:g};m="lw-datepicker";
o=function(b,a){return b.getFullYear()!==a.getFullYear()||b.getMonth()!==a.getMonth()?i:b.getDate()===a.getDate()};
n=function(){function b(a,d){this.r=q(this.r,this);this.show=q(this.show,this);this.hide=q(this.hide,this);this.m=q(this.m,this);this.l=q(this.l,this);this.g=q(this.g,this);this.input=a;this.input.bind("focus",this.show);this.input.bind("blur",this.hide);this.input.bind("keydown",this.r);this.input.bind("change",this.k);this.B=$.browser.msie&&8>=parseInt($.browser.version);this.input.data(m,e);this.a={f:d.startDate,e:d.endDate,A:d.dowNames,I:d.monthNames,q:d.firstDayOfTheWeekIndex,L:d.autoFillToday,
u:d.alwaysVisible,F:d.autoHideAfterClick,s:d.parseDate,j:d.formatDate,k:d.onChange};this.c=new Date;this.K=new Date;this.d=new Date;this.G();this.b.appendTo(document.body);this.margin=parseInt(this.b.css("margin-top"),10);this.b.css("margin",0);this.v();this.a.u&&this.D();this.t();this.g();this.hide()}b.prototype.input=g;b.prototype.c=g;b.prototype.p=e;b.prototype.o=e;b.prototype.n=e;b.prototype.G=function(){this.b=$("<div class=lw-dp/>");this.toolbar=$("<div class=lw-dp-toolbar/>").appendTo(this.b);
this.C=$("<div class=lw-dp-previous>\u25c4</div>").appendTo(this.toolbar);this.next=$("<div class=lw-dp-next>\u25ba</div>").appendTo(this.toolbar);this.H=$("<div class=lw-dp-month/>").appendTo(this.toolbar);this.J().appendTo(this.b);this.i=$("<div/>").appendTo(this.b)};b.prototype.v=function(){var a;this.b.bind("mousedown",q(function(a){a.preventDefault();a.stopPropagation();if(this.B)return this.n=i},this));a=this.B?"mousedown":"click";this.b.delegate(".lw-dp-next",a,this.l);this.b.delegate(".lw-dp-previous",
a,this.m);$(this.i).delegate("li:not(.lw-dp-active-day)",a,q(function(a){return this.h($(a.currentTarget))},this))};b.prototype.t=function(){return this.input.val(this.j(this.c))};b.prototype.g=function(a){var d,c,b,j,k,h,l;a==g&&(a=0);this.d.setMonth(this.d.getMonth()+a);this.H.html(this.a.I[this.d.getMonth()]+", "+this.d.getFullYear());d=this.d;a=new Date(d.getFullYear(),d.getMonth(),0);this.a.f!=g&&a.getTime()<this.a.f.getTime()?(this.p=i,$(this.C).hide()):(this.p=e,$(this.C).show());a=new Date(d.getFullYear(),
d.getMonth()+1,1);this.a.e!=g&&a.getTime()>this.a.e.getTime()?(this.o=i,$(this.next).hide()):(this.o=e,$(this.next).show());a=(new Date(d.getFullYear(),d.getMonth(),1)).getDay();j=(this.a.q+6)%7;c=(7-a+this.a.q)%7;0===c&&(c=7);a=new Date(d.getFullYear(),d.getMonth(),c-6);l=Math.ceil(((new Date(d.getFullYear(),d.getMonth()+1,0)).getDate()+7-c)/7);k=q(function(a){var b,c,f;c=[];b="";f=a.getDate();a.getMonth()!==d.getMonth()&&c.push("lw-dp-neighbour-month-day");(0===a.getDay()||6===a.getDay())&&c.push("lw-dp-weekend");
a.getDay()===j&&c.push("lw-dp-week-last-column");o(a,this.K)&&(c.push("lw-dp-today"),f="<span>"+f+"</span>");this.c!=g&&o(a,this.c)&&c.push("lw-dp-active-day");this.a.f&&a.getTime()<=this.a.f.getTime()&&(c.push("lw-dp-out-of-interval"),f="");this.a.e&&a.getTime()>=this.a.e.getTime()&&(c.push("lw-dp-out-of-interval"),f="");c.length&&(b=" class='"+c.join(" ")+"'");a.setDate(a.getDate()+1);return"<li"+b+">"+f+"</li>"},this);b="";for(h=1;1<=l?h<=l:h>=l;1<=l?h++:h--){b=1===h?b+"<ul class='lw-dp-week lw-dp-firstweek'>":
h===l?b+"<ul class='lw-dp-week lw-dp-lastweek'>":b+"<ul class=lw-dp-week>";for(c=1;7>=c;c++)b+=k(a);b+="</ul>"}return this.i.html(b)};b.prototype.h=function(a,d){var c,b,j,k,h;d==g&&(d=e);k=this.d.getFullYear();j=this.d.getMonth();c=parseInt(a.text());b=0;a.hasClass("lw-dp-neighbour-month-day")&&(b=10<c?-1:1);c=new Date(k,j+b,c);if(this.a.f==g||c.getTime()>=this.a.f.getTime())if(this.a.e==g||c.getTime()<=this.a.e.getTime())a.parent().parent().find("li").removeClass("lw-dp-active-day"),a.addClass("lw-dp-active-day"),
this.c=c,0!==b&&this.g(b);this.t();if(this.a.F&&d)(h=this.input)!=g&&h.blur();if("function"===typeof this.a.k)return this.a.k(this.c)};b.prototype.s=function(a){return"function"===typeof this.a.s?this.a.s(a):new Date(Date.parse(a))};b.prototype.j=function(a){return"function"===typeof this.a.j?this.a.j(a):a!=g?a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear():""};b.prototype.l=function(){return this.g(1)};b.prototype.m=function(){return this.g(-1)};b.prototype.J=function(){var a,b,c,f,j,k,h,l;b=this.a.A[this.a.q];
c=i;f="<ul class=lw-dp-dows>";j="";l=this.a.A;for(k=0,h=l.length;k<h;k++)a=l[k],a===b&&(c=e),a="<li>"+a+"</li>",c?f+=a:j+=a;return $(f+j+"</ul>")};b.prototype.D=function(){var a,b,c,f;a=this.input.offset();f=this.b.outerWidth();c=this.b.outerHeight();b=a.left;$("body").width()>b+f?this.b.css({left:b}):a.left>f+this.margin?this.b.css({left:a.left-f-this.margin}):this.b.css({left:b});b=a.top+this.input.outerHeight()+this.margin;$(document).height()>b+c?this.b.css({top:b}):a.top>c+this.margin?this.b.css({top:a.top-
c-this.margin}):this.b.css({top:b})};b.prototype.k=function(){this.g();return this.t()};b.prototype.hide=function(){var a;!this.a.u&&this.n&&this.b.remove();if(!this.n)(a=this.input)!=g&&a.focus();return this.n=e};b.prototype.show=function(){this.b.appendTo(document.body);this.v();this.D();return this.g()};b.prototype.z=function(){var a,b,c;this.c!=g&&(b=this.c.getDate()-1,a=new Date(this.c.getTime()),a.setMonth(this.d.getMonth()),a.setFullYear(this.d.getFullYear()),c=$(this.i).find("li:not(.lw-dp-neighbour-month-day)"),
c.length<=b?this.h(c.last(),i):this.a.e!=g&&a.getTime()>this.a.e.getTime()?this.h(c.eq(this.a.e.getDate()-2),i):this.a.f!=g&&a.getTime()<this.a.f.getTime()?this.h(c.eq(this.a.f.getDate()),i):this.h(c.eq(b),i))};b.prototype.w=function(a){var b,c,f;f="prev"===a?"last":"first";this.c!=g?(b=$(this.i).find("li.lw-dp-active-day"),c=b[a](),c.length||(c=b.parent()[a]().children()[f]())):c=$(this.i).find("li.lw-dp-today");this.h(c,i)};b.prototype.r=function(a){var b;b=a.keyCode;a=e;switch(b){case 27:this.input.blur();
break;case 33:this.p&&(this.m(),this.z());break;case 34:this.o&&(this.l(),this.z());break;case 38:this.w("prev");break;case 40:this.w("next");break;default:a=i}return!a};return b}();$.fn.lwDatepicker=function(b){b=$.extend(p,b);return this.each(function(){var a;a=$(this);if(a.is("input, textarea")&&!a.data(m))return new n(a,b)})};
